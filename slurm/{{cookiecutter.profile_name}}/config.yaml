# execution
jobs: {{cookiecutter.max_jobs}}
{% if cookiecutter.resources|length -%}
resources:
{%- for keyval in cookiecutter.resources.replace(' ', '').split(',') -%}
{% set key, value = keyval.replace(':', '=').split('=') %}
  - {{key}}={{value}}
{%- endfor %}
{%- endif %}
{% if cookiecutter.config|length -%}
config:
  - email={{cookiecutter.email}}
{%- for keyval in cookiecutter.config.replace(' ', '').split(',') -%}
{% set key, value = keyval.replace(':', '=').split('=') %}
  - {{key}}={{value}}
{%- endfor %}
{%- endif %}
keep-going: {{cookiecutter.keep_going}}

# environment
use-conda: {{cookiecutter.conda}}
use-singularity: {{cookiecutter.singularity}}

# behaviour
latency-wait: 15
restart-times: 1

# cluster
jobname: snake-{jobid}-{rule}
cluster-config: /home/{{cookiecutter.username}}/.config/snakemake/{{cookiecutter.profile_name}}/cluster.yaml
cluster: sbatch $(~/.config/snakemake/{{cookiecutter.profile_name}}/parseJobID-SLURM.sh {dependencies}) --partition {cluster.partition} --time {cluster.time} -c {threads} --mem {cluster.mem_gb}g
